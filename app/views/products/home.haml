%h1
  Popular Products
.products-display.row
  - i = 0
  -@products.each do |product|
    //%a{:href => product_path(product)}
    .product.pull-left{:id => i += 1}
      .image
        = image_tag product.image.url(:thumbnail)
      .name
        = product.name
      .price
        = product.price
.rok
  .left-button.pull-left
    %a{:onClick => "scroll(1)", :class => "btn"} Left
  .right-button.pull-right
    %a{:onClick => "scroll(-1)", :class => "btn"} Right

:javascript
  $(document).ready(function()
  {
    for(i=1;i<5;i++)
    {
      $('#'+i).css('width', '170px');
    }
  });

  var leftPhoto = 1;
  function scroll(direction)
  {
    var width = $('#1').width() * direction;

    if(!(leftPhoto == 1 && direction > 0) && !(leftPhoto == 9 && direction <0))
    {

      $(".products-display").animate({ 
        left: "+=" + width + "px",
      }, 500 );
      leftPhoto -= direction;

      for(i=1;i<13;i++)
      {

        if(!(leftPhoto <= i && i < leftPhoto + 4))
        {
          $('#'+i).animate({opacity: '-=1', width: '-=170px'}, 500);
        }
        else
        {
          $('#'+i).animate({opacity: '+=1', width: '+=170px'}, 500);

        }
      }
   
    }
  }
