= form_for @product do |f|
  - if errors = flash[:errors]
    #error_explanation
      %h2= "#{pluralize(errors.count, "error")} prevented this product from being saved:"
      %ul
        - errors.each do |attribute, msg|
          %li= "#{attribute} #{msg[0]}"

  .field
    = f.label :Name
    = f.text_field :name
  .field
    = f.label :Description
    = f.text_area :description, :class => 'wide'
  .field
    = f.label :Price
    = f.text_field :price
  .field
    = f.label :Category
    = f.select(:category, Product.categories)

  .field
    - Option.all.each do |option|
      %p
        = check_box_tag 'options[]', option.id, @product.options.include?(option)
        = option.value
  .field
    = f.label :Image
    = f.file_field :image
  .actions
    = f.submit 'Save'

= form_tag "Chuck", :id => "optForm" do#optForm
  = label_tag(:family, "Family:")
  = text_field_tag(:family)
  = label_tag(:value, "Value:")
  = text_field_tag(:value)

%a.btn#optSubmit{ :href => "#", :onClick => "newOption()" }
  Create!

:javascript
  function newOption(){
    myData = $('#optForm').serialize();
    $.ajax({
      url: '/options',
      type: 'post',
      dataType: 'application/json',
      data: myData,
      success: function(response, textStatus, jqXHR) {
        alert('it worked!');
      },
      error: function(jqXHR, textStatus, errorThrown){
        alert('nuuuu!');
        console.log(arguments);
      }
    });

  };
